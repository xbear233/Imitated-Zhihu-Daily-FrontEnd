import{q as p,R as k,c as i,A as u,_ as F,s as H,g as h,S as N,P as T,m as G,u as V,r as a,o as c,a as q,b as o,w as S,k as f,F as R,p as x}from"./index-494d12e5.js";import{u as m}from"./counter-01ed0c99.js";p.install=function(t){return t.component(p.name,p),t.component(k.name,k),t};var J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z"}}]},name:"like",theme:"filled"};const Q=J;function L(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.forEach(function(l){U(t,l,n[l])})}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(e,n){var r=L({},e,n.attrs);return i(u,L({},r,{icon:Q}),null)};g.displayName="LikeFilled";g.inheritAttrs=!1;const W=g;var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};const Y=X;function M(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.forEach(function(l){Z(t,l,n[l])})}return t}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(e,n){var r=M({},e,n.attrs);return i(u,M({},r,{icon:Y}),null)};O.displayName="LikeOutlined";O.inheritAttrs=!1;const K=O;var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};const te=ee;function w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.forEach(function(l){ne(t,l,n[l])})}return t}function ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(e,n){var r=w({},e,n.attrs);return i(u,w({},r,{icon:te}),null)};b.displayName="MessageOutlined";b.inheritAttrs=!1;const re=b;var le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const ie=le;function P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.forEach(function(l){ae(t,l,n[l])})}return t}function ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(e,n){var r=P({},e,n.attrs);return i(u,P({},r,{icon:ie}),null)};v.displayName="MoreOutlined";v.inheritAttrs=!1;const oe=v;var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"};const ce=se;function $(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),r.forEach(function(l){ue(t,l,n[l])})}return t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(e,n){var r=$({},e,n.attrs);return i(u,$({},r,{icon:ce}),null)};y.displayName="StarOutlined";y.inheritAttrs=!1;const de=y;const fe={components:{LeftOutlined:H,MessageOutlined:re,LikeOutlined:K,StarOutlined:de,MoreOutlined:oe,LikeFilled:W,message:h,StarFilled:N,PageHeader:T,Badge:p},computed:{...G(m)},data(){return{id:"",news:{body:""},link:null,extra:{},isLiked:!0,isCollect:!1}},methods:{handleStyle(t){if(t==null)return;let{css:e}=t;Array.isArray(e)&&(e=e[0],e&&(this.link=document.createElement("link"),this.link.rel="stylesheet",this.link.href=e,document.head.appendChild(this.link)))},handleImage(t){if(t==null)return;let e=document.querySelector(".img-place-holder");if(console.log("***",e),!e)return;let n=new Image;n.src=t.image,n.onload=()=>{e.appendChild(n)},n.onerror=()=>{let r=e.parentNode;r.parentNode.removeChild(r)}},likeit(){m().passport==!1&&(h.error("请先登录！"),this.$router.replace("/login")),this.isLiked=!this.isLiked},collectit(){m().passport==!1&&(h.error("请先登录！"),this.$router.replace("/login")),this.isCollect=!this.isCollect},checkIfCollect(t){const e=this;e.axios({methods:"GET",url:"http://localhost:8080/ifcollect?id="+t}).then(function(n){e.isCollect=n.data})},goback(){const t=this;t.axios({methods:"GET",url:"http://localhost:8080/ifcollect?id="+t.id}).then(function(e){e.data==!0&&t.isCollect==!1?t.axios({methods:"GET",url:"http://localhost:8080/detelecollect?id="+t.id}):e.data==!1&&t.isCollect==!0&&t.axios({methods:"GET",url:"http://localhost:8080/addcollect?id="+t.id})}),this.$router.replace("/")},getDetailById(){this.id=this.$route.params.id;const t=this;t.axios({methods:"GET",url:"http://localhost:8080/getdetail?id="+t.id}).then(function(e){t.news=e.data,V(()=>{t.handleStyle(t.news),t.handleImage(t.news)})})},getExtraById(){this.id=this.$route.params.id;const t=this;t.axios({methods:"GET",url:"http://localhost:8080/getextra?id="+t.id}).then(function(e){t.extra=e.data})}},created(){this.getDetailById(),this.getExtraById()},mounted(){this.checkIfCollect(this.id)},unmounted(){this.link&&document.head.removeChild(this.link)}},pe={class:"detail-box"},he=["innerHTML"],me={class:"tab-bar"},ge={class:"back"},Oe={class:"icons"},be={class:"{isStore ? 'stored' : ''}"};function ve(t,e,n,r,l,s){const z=a("page-header"),C=a("LeftOutlined"),j=a("MessageOutlined"),_=a("Badge"),B=a("LikeOutlined"),E=a("like-filled"),A=a("star-filled"),D=a("StarOutlined"),I=a("MoreOutlined");return c(),q(R,null,[i(z,{style:{border:"1px solid rgb(235, 237, 240)","background-color":"#DDD"},title:"返回",onBack:e[0]||(e[0]=()=>{t.$router.go(-1)})}),o("div",pe,[o("div",{class:"content",innerHTML:l.news.body},null,8,he),o("div",me,[o("div",ge,[i(C,{onClick:e[1]||(e[1]=d=>s.goback()),style:{fontSize:"24px"}})]),o("div",Oe,[i(_,{content:"0",count:this.extra.comments,"show-zero":!0,style:{overflow:"visible"}},{default:S(()=>[i(j,{style:{fontSize:"24px"}})]),_:1},8,["count"]),i(_,{content:"0",count:this.extra.popularity,"show-zero":!0,style:{overflow:"visible"}},{default:S(()=>[l.isLiked?(c(),f(B,{key:0,onClick:e[2]||(e[2]=x(d=>s.likeit(),["stop"])),style:{fontSize:"24px"}})):(c(),f(E,{key:1,onClick:e[3]||(e[3]=x(d=>s.likeit(),["stop"])),style:{fontSize:"24px"}}))]),_:1},8,["count"]),o("span",be,[l.isCollect?(c(),f(A,{key:0,onClick:e[4]||(e[4]=d=>s.collectit()),style:{fontSize:"24px"}})):(c(),f(D,{key:1,onClick:e[5]||(e[5]=d=>s.collectit()),style:{fontSize:"24px"}}))]),o("span",null,[i(I,{style:{fontSize:"24px"}})])])])])],64)}const ke=F(fe,[["render",ve],["__scopeId","data-v-c8bceec3"]]);export{ke as default};
